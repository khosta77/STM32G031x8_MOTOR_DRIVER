# Контроллер управления шагового двигателя

## Таблица пинов STM32G031F8P6

| Пин | Название        | Описание                                                                                                | Имя              |Направление |
|-----|-----------------|---------------------------------------------------------------------------------------------------------|------------------|------------|
| 1   | PB7/PB8         | Линия статуса состояния работы                                                                          | **STATUS**       |`->`        |
| 2   | PB9/PC14        | Концевик А                                                                                              | **ENDSTOP_A**    |`<-`        |
| 3   | PC15            | Концевик B                                                                                              | **ENDSTOP_B**    |`<-`        |
| 4   | VDD             | Питание                                                                                                 | **+3.3 V**       |`-`         |
| 5   | VSS             | Земля                                                                                                   | **GND**          |`-`         |
| 6   | PF2             | ❌                                                                                                      | ❌              |❌          |
| 7   | PA0             | Линия выбора чипа, если переходит в 1, на чип поступит команда, при переходе в 0 начинается перемещение | **SELECT**       |`<-`        |
| 8   | PA1             | Выход шагов на драйвер двигателя                                                                        | **M_STEP**       |`->`        |
| 9   | PA2             | Выход направления вращения на драйвер шагового двигателя                                                | **M_DIR**        |`->`        |
| 10  | PA3             | Выход включения драйвера шагового двигателя                                                             | **M_EN**         |`->`        |
| 11  | PA4             | ❌                                                                                                      | ❌              |❌          |
| 12  | PA5             | ❌                                                                                                      | ❌              |❌          |
| 13  | PA6             | Обозначает происходит ли сейчас перемещение                                                             | **ISWORKING**    |`->`        |
| 14  | PA7             | Дублирует сигнал с линии EN, 1 работает, иначе 0                                                        | **EN_STATUS**    | `->`       |
| 15  | PA8/PB0/PB1/PB2 | Частота чипа, должна быть 1 [MHz], будет означать, что на чипе 64 [MHz]                                 | **CLK**          |`->`        |
| 16  | PA9/PA11        | USART чтение, бод указан в отдельной части `README`                                                     | **Mx_USART1_RX** |`<-`        |
| 17  | PA10/PA12       | USART запись, бод указан в отдельной части `README`                                                     | **Mx_USART1_TX** |`->`        |
| 18  | PA13            | Линия для программирования чипа, используется 1 раз                                                     | **SWDIO**        |`-`         |
| 19  | PA14/PA15       | Линия для программирования чипа, используется 1 раз                                                     | **SWCLK**        | `-`        |
| 20  | PB3/PB4/PB5/PB6 | Линия включения чипа, если 1 чип работает, если 0 чип не работает, не активен                           | **EN**           |`<-`        |

## Сборка

```bash
make all
```



```cmd
make all; st-flash --reset write main.bin 0x08000000
```
